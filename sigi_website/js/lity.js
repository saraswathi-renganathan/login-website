!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(c){return b(a,c)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=b(a,require("jquery")):a.lity=b(a,a.jQuery||a.Zepto)}("undefined"!=typeof window?window:this,function(a,b){"use strict";function r(a){var b=e();return q&&a.length?(a.one(q,b.resolve),setTimeout(b.resolve,500)):b.resolve(),b.promise()}function s(a,c,d){if(1===arguments.length)return b.extend({},a);if("string"==typeof c){if("undefined"==typeof d)return"undefined"==typeof a[c]?null:a[c];a[c]=d}else b.extend(a,c);return this}function t(a){for(var d,b=decodeURI(a.split("#")[0]).split("&"),c={},e=0,f=b.length;e<f;e++)b[e]&&(d=b[e].split("="),c[d[0]]=d[1]);return c}function u(a,c){return a+(a.indexOf("?")>-1?"&":"?")+b.param(c)}function v(a,b){var c=a.indexOf("#");return-1===c?b:(c>0&&(a=a.substr(c)),b+a)}function w(a){return b('<span class="lity-error"/>').append(a)}function x(a,c){var d=c.opener()&&c.opener().data("lity-desc")||"Image with no description",f=b('<img src="'+a+'" alt="'+d+'"/>'),g=e(),h=function(){g.reject(w("Failed loading image"))};return f.on("load",function(){return 0===this.naturalWidth?h():void g.resolve(f)}).on("error",h),g.promise()}function y(a,c){var d,e,f;try{d=b(a)}catch(a){return!1}return!!d.length&&(e=b('<i style="display:none !important"/>'),f=d.hasClass("lity-hide"),c.element().one("lity:remove",function(){e.before(d).remove(),f&&!d.closest(".lity-content").length&&d.addClass("lity-hide")}),d.removeClass("lity-hide").after(e))}function z(a){var c=m.exec(a);return!!c&&D(v(a,u("https://www.youtube"+(c[2]||"")+".com/embed/"+c[4],b.extend({autoplay:1},t(c[5]||"")))))}function A(a){var c=n.exec(a);return!!c&&D(v(a,u("https://player.vimeo.com/video/"+c[3],b.extend({autoplay:1},t(c[4]||"")))))}function B(a){var c=p.exec(a);return!!c&&(0!==a.indexOf("http")&&(a="https:"+a),D(v(a,u("https://www.facebook.com/plugins/video.php?href="+a,b.extend({autoplay:1},t(c[4]||""))))))}function C(a){var b=o.exec(a);return!!b&&D(v(a,u("https://www.google."+b[3]+"/maps?"+b[6],{output:b[6].indexOf("layer=c")>0?"svembed":"embed"})))}function D(a){return'<div class="lity-iframe-container"><iframe frameborder="0" allowfullscreen src="'+a+'"/></div>'}function E(){return c.documentElement.clientHeight?c.documentElement.clientHeight:Math.round(d.height())}function F(a){var b=K();b&&(27===a.keyCode&&b.close(),9===a.keyCode&&G(a,b))}function G(a,b){var d=b.element().find(j),e=d.index(c.activeElement);a.shiftKey&&e<=0?(d.get(d.length-1).focus(),a.preventDefault()):a.shiftKey||e!==d.length-1||(d.get(0).focus(),a.preventDefault())}function H(){b.each(g,function(a,b){b.resize()})}function I(a){1===g.unshift(a)&&(f.addClass("lity-active"),d.on({resize:H,keydown:F})),b("body > *").not(a.element()).addClass("lity-hidden").each(function(){var a=b(this);void 0===a.data(i)&&a.data(i,a.attr(h)||null)}).attr(h,"true")}function J(a){var c;a.element().attr(h,"true"),1===g.length&&(f.removeClass("lity-active"),d.off({resize:H,keydown:F})),g=b.grep(g,function(b){return a!==b}),c=g.length?g[0].element():b(".lity-hidden"),c.removeClass("lity-hidden").each(function(){var a=b(this),c=a.data(i);c?a.attr(h,c):a.removeAttr(h),a.removeData(i)})}function K(){return 0===g.length?null:g[0]}function L(a,c,d,e){var g,f="inline",h=b.extend({},d);return e&&h[e]?(g=h[e](a,c),f=e):(b.each(["inline","iframe"],function(a,b){delete h[b],h[b]=d[b]}),b.each(h,function(b,d){return!d||(!(!d.test||d.test(a,c))||(g=d(a,c),!1!==g?(f=b,!1):void 0))})),{handler:f,content:g||""}}function M(a,d,f,g){function p(a){o=b(a).css("max-height",E()+"px"),n.find(".lity-loader").each(function(){var a=b(this);r(a).always(function(){a.remove()})}),n.removeClass("lity-loading").find(".lity-content").empty().append(o),l=!0,o.trigger("lity:ready",[i])}var j,n,o,i=this,l=!1,m=!1;d=b.extend({},k,d),n=b(d.template),i.element=function(){return n},i.opener=function(){return f},i.options=b.proxy(s,i,d),i.handlers=b.proxy(s,i,d.handlers),i.resize=function(){l&&!m&&o.css("max-height",E()+"px").trigger("lity:resize",[i])},i.close=function(){if(l&&!m){m=!0,J(i);var a=e();if(g&&(c.activeElement===n[0]||b.contains(n[0],c.activeElement)))try{g.focus()}catch(a){}return o.trigger("lity:close",[i]),n.removeClass("lity-opened").addClass("lity-closed"),r(o.add(n)).always(function(){o.trigger("lity:remove",[i]),n.remove(),n=void 0,a.resolve()}),a.promise()}},j=L(a,i,d.handlers,d.handler),n.attr(h,"false").addClass("lity-loading lity-opened lity-"+j.handler).appendTo("body").focus().on("click","[data-lity-close]",function(a){b(a.target).is("[data-lity-close]")&&i.close()}).trigger("lity:open",[i]),I(i),b.when(j.content).always(p)}function N(a,d,e){a.preventDefault?(a.preventDefault(),e=b(this),a=e.data("lity-target")||e.attr("href")||e.attr("src")):e=b(e);var f=new M(a,b.extend({},e.data("lity-options")||e.data("lity"),d),e,c.activeElement);if(!a.preventDefault)return f}var c=a.document,d=b(a),e=b.Deferred,f=b("html"),g=[],h="aria-hidden",i="lity-"+h,j='a[href],area[href],input:not([disabled]),select:not([disabled]),textarea:not([disabled]),button:not([disabled]),iframe,object,embed,[contenteditable],[tabindex]:not([tabindex^="-"])',k={handler:null,handlers:{image:x,inline:y,youtube:z,vimeo:A,googlemaps:C,facebookvideo:B,iframe:D},template:'<div class="lity" role="dialog" aria-label="Dialog Window (Press escape to close)" tabindex="-1"><div class="lity-wrap" data-lity-close role="document"><div class="lity-loader" aria-hidden="true">Loading...</div><div class="lity-container"><div class="lity-content"></div><button class="lity-close" type="button" aria-label="Close (Press escape to close)" data-lity-close>&times;</button></div></div></div>'},l=/(^data:image\/)|(\.(png|jpe?g|gif|svg|webp|bmp|ico|tiff?)(\?\S*)?$)/i,m=/(youtube(-nocookie)?\.com|youtu\.be)\/(watch\?v=|v\/|u\/|embed\/?)?([\w-]{11})(.*)?/i,n=/(vimeo(pro)?.com)\/(?:[^\d]+)?(\d+)\??(.*)?$/,o=/((maps|www)\.)?google\.([^\/\?]+)\/?((maps\/?)?\?)(.*)/i,p=/(facebook\.com)\/([a-z0-9_-]*)\/videos\/([0-9]*)(.*)?$/i,q=function(){var a=c.createElement("div"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var d in b)if(void 0!==a.style[d])return b[d];return!1}();return x.test=function(a){return l.test(a)},N.version="2.2.2",N.options=b.proxy(s,N,k),N.handlers=b.proxy(s,N,k.handlers),N.current=K,b(c).on("click.lity","[data-lity]",N),N});